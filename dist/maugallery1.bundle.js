(()=>{class t{constructor(e,s){this.element=e,this.options=Object.assign(t.defaults,s),this.tagsCollection=[],this.init()}static defaults={columns:3,lightBox:!0,lightboxId:null,showTags:!0,tagsPosition:"bottom",navigation:!0};init(){this.createRowWrapper(),this.options.lightBox&&this.createLightBox(),this.listeners(),this.element.querySelectorAll(".gallery-item").forEach((t=>{this.responsiveImageItem(t),this.moveItemInRowWrapper(t),this.wrapItemInColumn(t,this.options.columns);const e=t.getAttribute("data-gallery-tag");this.options.showTags&&e&&!this.tagsCollection.includes(e)&&this.tagsCollection.push(e)})),this.options.showTags&&this.showItemTags(),this.element.style.display="block",this.element.style.opacity=0,setTimeout((()=>{this.element.style.transition="opacity 0.5s",this.element.style.opacity=1}),0)}createRowWrapper(){if(!this.element.querySelector(".gallery-items-row")){const t=document.createElement("div");t.classList.add("gallery-items-row","row"),this.element.appendChild(t)}}wrapItemInColumn(t,e){const s=this.getColumnClasses(e),i=document.createElement("div");i.classList.add("item-column","mb-4",...s),i.appendChild(t.cloneNode(!0)),t.parentNode.replaceChild(i,t)}getColumnClasses(t){const e=[];return"number"==typeof t?e.push(`col-${Math.ceil(12/t)}`):"object"==typeof t&&(t.xs&&e.push(`col-${Math.ceil(12/t.xs)}`),t.sm&&e.push(`col-sm-${Math.ceil(12/t.sm)}`),t.md&&e.push(`col-md-${Math.ceil(12/t.md)}`),t.lg&&e.push(`col-lg-${Math.ceil(12/t.lg)}`),t.xl&&e.push(`col-xl-${Math.ceil(12/t.xl)}`)),e}moveItemInRowWrapper(t){this.element.querySelector(".gallery-items-row").appendChild(t)}responsiveImageItem(t){"IMG"===t.tagName&&t.classList.add("img-fluid")}openLightBox(t){const e=document.getElementById(this.options.lightboxId||"galleryLightbox");e.querySelector(".lightboxImage").src=t.src,e.classList.add("show"),e.style.display="block"}prevImage(){this.navigateImage(-1)}nextImage(){this.navigateImage(1)}navigateImage(t){const e=document.querySelector(".lightboxImage").src,s=document.querySelectorAll("img.gallery-item");let i=[...s].findIndex((t=>t.src===e));const a=[...s].filter((t=>{const e=document.querySelector(".tags-bar span.active-tag").dataset.imagesToggle;return"all"===e||t.getAttribute("data-gallery-tag")===e}));i=(i+t+a.length)%a.length,document.querySelector(".lightboxImage").src=a[i].src}createLightBox(){const t=this.options.lightboxId||"galleryLightbox",e=document.createElement("div");e.classList.add("modal","fade"),e.id=t,e.setAttribute("tabindex","-1"),e.setAttribute("role","dialog"),e.setAttribute("aria-hidden","true"),e.innerHTML=`\n          <div class="modal-dialog" role="document">\n              <div class="modal-content">\n                  <div class="modal-body">\n                      ${this.options.navigation?'<div class="mg-prev" style="cursor:pointer;position:absolute;top:50%;left:-15px;background:white;"><</div>':'<span style="display:none;" />'}\n                      <img class="lightboxImage img-fluid" alt="Contenu de l'image affichÃ©e dans la modale au clique"/>\n                      ${this.options.navigation?'<div class="mg-next" style="cursor:pointer;position:absolute;top:50%;right:-15px;background:white;}">></div>':'<span style="display:none;" />'}\n                  </div>\n              </div>\n          </div>\n      `,this.element.appendChild(e)}showItemTags(){const t=['<li class="nav-item"><span class="nav-link active active-tag"  data-images-toggle="all">Tous</span></li>',...this.tagsCollection.map((t=>`<li class="nav-item active"><span class="nav-link"  data-images-toggle="${t}">${t}</span></li>`))].join(""),e=document.createElement("ul");e.classList.add("my-4","tags-bar","nav","nav-pills"),e.innerHTML=t,"bottom"===this.options.tagsPosition?this.element.appendChild(e):"top"===this.options.tagsPosition?this.element.insertBefore(e,this.element.firstChild):console.error(`Unknown tags position: ${this.options.tagsPosition}`)}filterByTag(t){const e=t.target.dataset.imagesToggle;document.querySelector(".active.active-tag").classList.remove("active","active-tag"),t.target.classList.add("active","active-tag"),document.querySelectorAll(".gallery-item").forEach((t=>{const s=t.closest(".item-column");"all"===e||t.getAttribute("data-gallery-tag")===e?(s.style.display="block",setTimeout((()=>s.style.opacity=1),300)):(s.style.opacity=0,setTimeout((()=>s.style.display="none"),300))}))}listeners(){this.element.querySelectorAll(".gallery-item").forEach((t=>{t.addEventListener("click",(()=>{this.options.lightBox&&"IMG"===t.tagName&&this.openLightBox(t)}))})),this.element.addEventListener("click",(t=>{t.target.classList.contains("nav-link")&&this.filterByTag(t),t.target.classList.contains("mg-prev")&&this.prevImage(),t.target.classList.contains("mg-next")&&this.nextImage()}))}}document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".gallery");e&&new t(e,{columns:3,lightBox:!0,lightboxId:"galleryLightbox",showTags:!0,tagsPosition:"bottom",navigation:!0})}))})();